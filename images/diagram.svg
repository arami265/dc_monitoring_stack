<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.1.1 (20251213.1925)
 -->
<!-- Title: dc_power_monitoring Pages: 1 -->
<svg width="978pt" height="935pt"
 viewBox="0.00 0.00 978.00 935.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 930.64)">
<title>dc_power_monitoring</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-930.64 974,-930.64 974,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="485" y="-905.54" font-family="Times New Roman,serif" font-size="18.00">DC Power Monitoring (PV &#45;&gt; Combiner &#45;&gt; MPPT &#45;&gt; Batteries/LEDs) with PZEM&#45;017 (Shunt + RS485)</text>
<g id="clust1" class="cluster">
<title>cluster_combiner</title>
<path fill="none" stroke="black" d="M184,-607.45C184,-607.45 306,-607.45 306,-607.45 312,-607.45 318,-613.45 318,-619.45 318,-619.45 318,-758.64 318,-758.64 318,-764.64 312,-770.64 306,-770.64 306,-770.64 184,-770.64 184,-770.64 178,-770.64 172,-764.64 172,-758.64 172,-758.64 172,-619.45 172,-619.45 172,-613.45 178,-607.45 184,-607.45"/>
<text xml:space="preserve" text-anchor="middle" x="245" y="-755.24" font-family="Times New Roman,serif" font-size="12.00">Combiner Box</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_mppt</title>
<path fill="none" stroke="black" d="M384,-432.01C384,-432.01 790,-432.01 790,-432.01 796,-432.01 802,-438.01 802,-444.01 802,-444.01 802,-494.26 802,-494.26 802,-500.26 796,-506.26 790,-506.26 790,-506.26 384,-506.26 384,-506.26 378,-506.26 372,-500.26 372,-494.26 372,-494.26 372,-444.01 372,-444.01 372,-438.01 378,-432.01 384,-432.01"/>
<text xml:space="preserve" text-anchor="middle" x="587" y="-490.86" font-family="Times New Roman,serif" font-size="12.00">MPPT Charge Controller (no common negative)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_battery_pack</title>
<path fill="none" stroke="black" d="M685,-607.45C685,-607.45 950,-607.45 950,-607.45 956,-607.45 962,-613.45 962,-619.45 962,-619.45 962,-877.64 962,-877.64 962,-883.64 956,-889.64 950,-889.64 950,-889.64 685,-889.64 685,-889.64 679,-889.64 673,-883.64 673,-877.64 673,-877.64 673,-619.45 673,-619.45 673,-613.45 679,-607.45 685,-607.45"/>
<text xml:space="preserve" text-anchor="middle" x="817.5" y="-874.24" font-family="Times New Roman,serif" font-size="12.00">Battery Pack (2x 12V in series) + 2&#45;pole Pack Disconnect</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_ip67_enclosure</title>
<path fill="none" stroke="black" d="M20,-8C20,-8 285,-8 285,-8 291,-8 297,-14 297,-20 297,-20 297,-552.88 297,-552.88 297,-558.88 291,-564.88 285,-564.88 285,-564.88 20,-564.88 20,-564.88 14,-564.88 8,-558.88 8,-552.88 8,-552.88 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text xml:space="preserve" text-anchor="middle" x="152.5" y="-549.48" font-family="Times New Roman,serif" font-size="12.00">IP67 Enclosure</text>
<text xml:space="preserve" text-anchor="middle" x="152.5" y="-535.23" font-family="Times New Roman,serif" font-size="12.00">(Sensor + Shunt + Telemetry Stack)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_pzem</title>
<path fill="none" stroke="black" d="M36,-207C36,-207 174,-207 174,-207 180,-207 186,-213 186,-219 186,-219 186,-508.38 186,-508.38 186,-514.38 180,-520.38 174,-520.38 174,-520.38 36,-520.38 36,-520.38 30,-520.38 24,-514.38 24,-508.38 24,-508.38 24,-219 24,-219 24,-213 30,-207 36,-207"/>
<text xml:space="preserve" text-anchor="middle" x="105" y="-504.98" font-family="Times New Roman,serif" font-size="12.00">PZEM&#45;017 Power Sensor</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_pi_stack</title>
<path fill="none" stroke="black" d="M28,-16C28,-16 144,-16 144,-16 150,-16 156,-22 156,-28 156,-28 156,-166.5 156,-166.5 156,-172.5 150,-178.5 144,-178.5 144,-178.5 28,-178.5 28,-178.5 22,-178.5 16,-172.5 16,-166.5 16,-166.5 16,-28 16,-28 16,-22 22,-16 28,-16"/>
<text xml:space="preserve" text-anchor="middle" x="86" y="-163.1" font-family="Times New Roman,serif" font-size="12.00">Telemetry Stack</text>
</g>
<!-- egnd -->
<g id="node1" class="node">
<title>egnd</title>
<ellipse fill="none" stroke="black" cx="393" cy="-633.45" rx="67" ry="21.57"/>
<text xml:space="preserve" text-anchor="middle" x="393" y="-635.2" font-family="Times New Roman,serif" font-size="10.00">Equipment Ground</text>
<text xml:space="preserve" text-anchor="middle" x="393" y="-623.95" font-family="Times New Roman,serif" font-size="10.00">(frame/EGC bond)</text>
</g>
<!-- pv_array -->
<g id="node2" class="node">
<title>pv_array</title>
<polygon fill="none" stroke="black" points="401.62,-859.39 236.38,-859.39 236.38,-817.64 401.62,-817.64 401.62,-859.39"/>
<text xml:space="preserve" text-anchor="middle" x="319" y="-845.89" font-family="Times New Roman,serif" font-size="10.00">PV Array</text>
<text xml:space="preserve" text-anchor="middle" x="319" y="-834.64" font-family="Times New Roman,serif" font-size="10.00">(6x 100W panels in series)</text>
<text xml:space="preserve" text-anchor="middle" x="319" y="-823.39" font-family="Times New Roman,serif" font-size="10.00">Frames bonded to equipment ground</text>
</g>
<!-- pv_array&#45;&gt;egnd -->
<g id="edge1" class="edge">
<title>pv_array&#45;&gt;egnd</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M362.42,-817.15C368.93,-812.29 374.84,-806.48 379,-799.64 403.78,-758.87 402.34,-701.64 398.24,-666.36"/>
<polygon fill="black" stroke="black" points="401.76,-666.25 396.99,-656.79 394.82,-667.16 401.76,-666.25"/>
<text xml:space="preserve" text-anchor="middle" x="420.84" y="-719.09" font-family="Times New Roman,serif" font-size="9.00">frame bond</text>
</g>
<!-- combiner -->
<g id="node3" class="node">
<title>combiner</title>
<polygon fill="none" stroke="black" points="310.38,-740.39 179.62,-740.39 179.62,-704.39 310.38,-704.39 310.38,-740.39"/>
<text xml:space="preserve" text-anchor="middle" x="245" y="-724.14" font-family="Times New Roman,serif" font-size="10.00">PV String Input Termination</text>
<text xml:space="preserve" text-anchor="middle" x="245" y="-712.89" font-family="Times New Roman,serif" font-size="10.00">(Position 1 occupied)</text>
</g>
<!-- pv_array&#45;&gt;combiner -->
<g id="edge3" class="edge">
<title>pv_array&#45;&gt;combiner</title>
<path fill="none" stroke="black" d="M305.94,-817.38C293.82,-798.68 275.68,-770.71 262.35,-750.15"/>
<polygon fill="black" stroke="black" points="265.44,-748.48 257.06,-741.99 259.56,-752.28 265.44,-748.48"/>
<text xml:space="preserve" text-anchor="middle" x="334.58" y="-785.84" font-family="Times New Roman,serif" font-size="9.00">PV + / PV &#45; conductors</text>
</g>
<!-- combiner&#45;&gt;egnd -->
<g id="edge2" class="edge">
<title>combiner&#45;&gt;egnd</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M273.39,-703.96C288.63,-694.67 307.77,-683.11 325,-673.02 333.25,-668.19 342.11,-663.09 350.61,-658.25"/>
<polygon fill="black" stroke="black" points="352.09,-661.43 359.06,-653.45 348.64,-655.34 352.09,-661.43"/>
<text xml:space="preserve" text-anchor="middle" x="352" y="-674.97" font-family="Times New Roman,serif" font-size="9.00">enclosure bond</text>
</g>
<!-- pv_disconnect -->
<g id="node4" class="node">
<title>pv_disconnect</title>
<polygon fill="none" stroke="black" points="295.12,-651.45 180.88,-651.45 180.88,-615.45 295.12,-615.45 295.12,-651.45"/>
<text xml:space="preserve" text-anchor="middle" x="238" y="-635.2" font-family="Times New Roman,serif" font-size="10.00">PV Disconnect</text>
<text xml:space="preserve" text-anchor="middle" x="238" y="-623.95" font-family="Times New Roman,serif" font-size="10.00">(PV+ and PV&#45; terminals)</text>
</g>
<!-- combiner&#45;&gt;pv_disconnect -->
<g id="edge4" class="edge">
<title>combiner&#45;&gt;pv_disconnect</title>
<path fill="none" stroke="black" d="M241.75,-704.11C240.68,-697.67 239.6,-690.28 239,-683.52 238.41,-676.94 238.09,-669.85 237.93,-663.16"/>
<polygon fill="black" stroke="black" points="241.43,-663.21 237.8,-653.25 234.43,-663.3 241.43,-663.21"/>
<text xml:space="preserve" text-anchor="middle" x="270.5" y="-674.97" font-family="Times New Roman,serif" font-size="9.00">PV+ internal feed</text>
</g>
<!-- mppt_pv_pos -->
<g id="node5" class="node">
<title>mppt_pv_pos</title>
<polygon fill="none" stroke="black" points="434,-476.01 380,-476.01 380,-440.01 434,-440.01 434,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="407" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">PV+</text>
</g>
<!-- pv_disconnect&#45;&gt;mppt_pv_pos -->
<g id="edge5" class="edge">
<title>pv_disconnect&#45;&gt;mppt_pv_pos</title>
<path fill="none" stroke="black" d="M254.82,-615.19C284.73,-584.49 347.3,-520.28 382.17,-484.49"/>
<polygon fill="black" stroke="black" points="384.47,-487.15 388.94,-477.54 379.45,-482.26 384.47,-487.15"/>
<text xml:space="preserve" text-anchor="middle" x="355.29" y="-580.08" font-family="Times New Roman,serif" font-size="9.00">PV+ (post disconnect) to controller</text>
</g>
<!-- pzem_sense -->
<g id="node17" class="node">
<title>pzem_sense</title>
<polygon fill="none" stroke="black" points="177.5,-490.13 32.5,-490.13 32.5,-425.88 177.5,-425.88 177.5,-490.13"/>
<text xml:space="preserve" text-anchor="middle" x="105" y="-476.63" font-family="Times New Roman,serif" font-size="10.00">Sense Side</text>
<text xml:space="preserve" text-anchor="middle" x="105" y="-465.38" font-family="Times New Roman,serif" font-size="10.00">(4 terminals)</text>
<text xml:space="preserve" text-anchor="middle" x="105" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">&#45; 3 on shunt for voltage</text>
<text xml:space="preserve" text-anchor="middle" x="105" y="-442.88" font-family="Times New Roman,serif" font-size="10.00">&#45; 1 tap to PV+ (post disconnect)</text>
<text xml:space="preserve" text-anchor="middle" x="105" y="-431.63" font-family="Times New Roman,serif" font-size="10.00">(powers sense side)</text>
</g>
<!-- pv_disconnect&#45;&gt;pzem_sense -->
<g id="edge16" class="edge">
<title>pv_disconnect&#45;&gt;pzem_sense</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M180.51,-627.64C157.45,-622.67 132.77,-612.89 117.5,-593.88 96.96,-568.31 95.09,-530.56 97.65,-501.5"/>
<polygon fill="black" stroke="black" points="101.08,-502.26 98.7,-491.94 94.12,-501.5 101.08,-502.26"/>
<text xml:space="preserve" text-anchor="middle" x="170.75" y="-585.33" font-family="Times New Roman,serif" font-size="9.00">PV+ tap (post PV disconnect)</text>
<text xml:space="preserve" text-anchor="middle" x="170.75" y="-574.83" font-family="Times New Roman,serif" font-size="9.00">(powers sense side)</text>
</g>
<!-- mppt_pv_neg -->
<g id="node6" class="node">
<title>mppt_pv_neg</title>
<polygon fill="none" stroke="black" points="506,-476.01 452,-476.01 452,-440.01 506,-440.01 506,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="479" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">PV&#45;</text>
</g>
<!-- shunt -->
<g id="node16" class="node">
<title>shunt</title>
<polygon fill="none" stroke="black" points="274.5,-365.32 201.5,-365.32 201.5,-329.32 274.5,-329.32 274.5,-365.32"/>
<text xml:space="preserve" text-anchor="middle" x="238" y="-349.07" font-family="Times New Roman,serif" font-size="10.00">Current Shunt</text>
<text xml:space="preserve" text-anchor="middle" x="238" y="-337.82" font-family="Times New Roman,serif" font-size="10.00">(in PV&#45; return)</text>
</g>
<!-- mppt_pv_neg&#45;&gt;shunt -->
<g id="edge6" class="edge">
<title>mppt_pv_neg&#45;&gt;shunt</title>
<path fill="none" stroke="black" d="M461.28,-439.52C455.73,-434.67 449.39,-429.69 443,-425.88 392.73,-395.94 328.9,-373.98 285.92,-361.22"/>
<polygon fill="black" stroke="black" points="286.96,-357.88 276.38,-358.44 285,-364.6 286.96,-357.88"/>
<text xml:space="preserve" text-anchor="middle" x="445.45" y="-394.08" font-family="Times New Roman,serif" font-size="9.00">PV&#45; return (post&#45;load)</text>
</g>
<!-- mppt_bat_pos -->
<g id="node7" class="node">
<title>mppt_bat_pos</title>
<polygon fill="none" stroke="black" points="722,-476.01 668,-476.01 668,-440.01 722,-440.01 722,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="695" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">BAT+</text>
</g>
<!-- mppt_bat_neg -->
<g id="node8" class="node">
<title>mppt_bat_neg</title>
<polygon fill="none" stroke="black" points="794,-476.01 740,-476.01 740,-440.01 794,-440.01 794,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="767" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">BAT&#45;</text>
</g>
<!-- mppt_load_pos -->
<g id="node9" class="node">
<title>mppt_load_pos</title>
<polygon fill="none" stroke="black" points="578,-476.01 524,-476.01 524,-440.01 578,-440.01 578,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="551" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">LOAD+</text>
</g>
<!-- led_load -->
<g id="node14" class="node">
<title>led_load</title>
<polygon fill="none" stroke="black" points="664,-651.45 510,-651.45 510,-615.45 664,-615.45 664,-651.45"/>
<text xml:space="preserve" text-anchor="middle" x="587" y="-635.2" font-family="Times New Roman,serif" font-size="10.00">DC LED Load</text>
<text xml:space="preserve" text-anchor="middle" x="587" y="-623.95" font-family="Times New Roman,serif" font-size="10.00">(fed from MPPT LOAD terminals)</text>
</g>
<!-- mppt_load_pos&#45;&gt;led_load -->
<g id="edge13" class="edge">
<title>mppt_load_pos&#45;&gt;led_load</title>
<path fill="none" stroke="black" d="M550.61,-476.5C550.52,-502.67 552.27,-553.29 565.25,-593.88 566.46,-597.66 568.06,-601.48 569.85,-605.17"/>
<polygon fill="black" stroke="black" points="566.66,-606.64 574.5,-613.77 572.82,-603.31 566.66,-606.64"/>
<text xml:space="preserve" text-anchor="middle" x="580.62" y="-580.08" font-family="Times New Roman,serif" font-size="9.00">LOAD+</text>
</g>
<!-- mppt_load_neg -->
<g id="node10" class="node">
<title>mppt_load_neg</title>
<polygon fill="none" stroke="black" points="650,-476.01 596,-476.01 596,-440.01 650,-440.01 650,-476.01"/>
<text xml:space="preserve" text-anchor="middle" x="623" y="-454.13" font-family="Times New Roman,serif" font-size="10.00">LOAD&#45;</text>
</g>
<!-- batt1 -->
<g id="node11" class="node">
<title>batt1</title>
<polygon fill="none" stroke="black" points="815.88,-859.39 736.12,-859.39 736.12,-817.64 815.88,-817.64 815.88,-859.39"/>
<text xml:space="preserve" text-anchor="middle" x="776" y="-845.89" font-family="Times New Roman,serif" font-size="10.00">Battery 1 (12V)</text>
<text xml:space="preserve" text-anchor="middle" x="776" y="-834.64" font-family="Times New Roman,serif" font-size="10.00">Batt1+</text>
<text xml:space="preserve" text-anchor="middle" x="776" y="-823.39" font-family="Times New Roman,serif" font-size="10.00">Batt1&#45;</text>
</g>
<!-- batt2 -->
<g id="node12" class="node">
<title>batt2</title>
<polygon fill="none" stroke="black" points="773.88,-743.27 694.12,-743.27 694.12,-701.52 773.88,-701.52 773.88,-743.27"/>
<text xml:space="preserve" text-anchor="middle" x="734" y="-729.77" font-family="Times New Roman,serif" font-size="10.00">Battery 2 (12V)</text>
<text xml:space="preserve" text-anchor="middle" x="734" y="-718.52" font-family="Times New Roman,serif" font-size="10.00">Batt2+</text>
<text xml:space="preserve" text-anchor="middle" x="734" y="-707.27" font-family="Times New Roman,serif" font-size="10.00">Batt2&#45;</text>
</g>
<!-- batt1&#45;&gt;batt2 -->
<g id="edge8" class="edge">
<title>batt1&#45;&gt;batt2</title>
<path fill="none" stroke="black" d="M758.47,-817.34C754.5,-811.89 750.67,-805.79 748,-799.64 741.89,-785.56 738.45,-768.89 736.51,-754.73"/>
<polygon fill="black" stroke="black" points="740.01,-754.57 735.38,-745.05 733.06,-755.38 740.01,-754.57"/>
<text xml:space="preserve" text-anchor="middle" x="787" y="-791.09" font-family="Times New Roman,serif" font-size="9.00">Permanent series link:</text>
<text xml:space="preserve" text-anchor="middle" x="787" y="-780.59" font-family="Times New Roman,serif" font-size="9.00">Batt1+ to Batt2&#45;</text>
</g>
<!-- pack_disconnect -->
<g id="node13" class="node">
<title>pack_disconnect</title>
<polygon fill="none" stroke="black" points="868.62,-651.45 721.38,-651.45 721.38,-615.45 868.62,-615.45 868.62,-651.45"/>
<text xml:space="preserve" text-anchor="middle" x="795" y="-635.2" font-family="Times New Roman,serif" font-size="10.00">Pack Disconnect</text>
<text xml:space="preserve" text-anchor="middle" x="795" y="-623.95" font-family="Times New Roman,serif" font-size="10.00">(2&#45;pole: opens Pack+ and Pack&#45;)</text>
</g>
<!-- batt1&#45;&gt;pack_disconnect -->
<g id="edge11" class="edge">
<title>batt1&#45;&gt;pack_disconnect</title>
<path fill="none" stroke="black" d="M811.36,-817.35C817.25,-812.35 822.55,-806.44 826,-799.64 851.48,-749.46 847.51,-725.81 828,-673.02 826.43,-668.77 824.16,-664.67 821.53,-660.83"/>
<polygon fill="black" stroke="black" points="824.36,-658.76 815.41,-653.09 818.87,-663.1 824.36,-658.76"/>
<text xml:space="preserve" text-anchor="middle" x="905.38" y="-719.09" font-family="Times New Roman,serif" font-size="9.00">Pack&#45; (Batt1&#45;) into disconnect pole</text>
</g>
<!-- batt2&#45;&gt;pack_disconnect -->
<g id="edge9" class="edge">
<title>batt2&#45;&gt;pack_disconnect</title>
<path fill="none" stroke="black" d="M707.62,-701.24C699.54,-692.59 694.23,-682.34 700.5,-673.02 704.46,-667.13 709.49,-662.14 715.16,-657.91"/>
<polygon fill="black" stroke="black" points="716.75,-661.05 723.26,-652.69 712.96,-655.16 716.75,-661.05"/>
<text xml:space="preserve" text-anchor="middle" x="764.25" y="-674.97" font-family="Times New Roman,serif" font-size="9.00">Pack+ (Batt2+) into disconnect pole</text>
</g>
<!-- pack_disconnect&#45;&gt;mppt_bat_pos -->
<g id="edge10" class="edge">
<title>pack_disconnect&#45;&gt;mppt_bat_pos</title>
<path fill="none" stroke="black" d="M721,-619.75C707.55,-614.03 695.14,-605.79 686.75,-593.88 664.67,-562.57 674.12,-516.32 683.86,-486.93"/>
<polygon fill="black" stroke="black" points="687.11,-488.21 687.17,-477.62 680.52,-485.87 687.11,-488.21"/>
<text xml:space="preserve" text-anchor="middle" x="734.38" y="-580.08" font-family="Times New Roman,serif" font-size="9.00">Pack+ out to MPPT BAT+</text>
</g>
<!-- pack_disconnect&#45;&gt;mppt_bat_neg -->
<g id="edge12" class="edge">
<title>pack_disconnect&#45;&gt;mppt_bat_neg</title>
<path fill="none" stroke="black" d="M792.21,-615.19C787.4,-585.39 777.5,-524.04 771.64,-487.73"/>
<polygon fill="black" stroke="black" points="775.11,-487.27 770.06,-477.95 768.2,-488.38 775.11,-487.27"/>
<text xml:space="preserve" text-anchor="middle" x="833.23" y="-580.08" font-family="Times New Roman,serif" font-size="9.00">Pack&#45; out to MPPT BAT&#45;</text>
</g>
<!-- led_load&#45;&gt;mppt_load_neg -->
<g id="edge14" class="edge">
<title>led_load&#45;&gt;mppt_load_neg</title>
<path fill="none" stroke="black" d="M591.15,-615.2C592.72,-608.55 594.49,-600.87 596,-593.88 603.93,-557.29 612.28,-514.92 617.55,-487.59"/>
<polygon fill="black" stroke="black" points="620.95,-488.47 619.4,-477.99 614.07,-487.15 620.95,-488.47"/>
<text xml:space="preserve" text-anchor="middle" x="614.15" y="-580.08" font-family="Times New Roman,serif" font-size="9.00">LOAD&#45;</text>
</g>
<!-- pi_psu -->
<g id="node15" class="node">
<title>pi_psu</title>
<polygon fill="none" stroke="black" points="421.12,-148.25 306.88,-148.25 306.88,-106.5 421.12,-106.5 421.12,-148.25"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-134.75" font-family="Times New Roman,serif" font-size="10.00">Pi Power Supply</text>
<text xml:space="preserve" text-anchor="middle" x="364" y="-123.5" font-family="Times New Roman,serif" font-size="10.00">120VAC &#45;&gt; 5V (~3A)</text>
<text xml:space="preserve" text-anchor="middle" x="364" y="-112.25" font-family="Times New Roman,serif" font-size="10.00">(outside IP67 enclosure)</text>
</g>
<!-- pi -->
<g id="node21" class="node">
<title>pi</title>
<polygon fill="none" stroke="black" points="147.88,-60 80.12,-60 80.12,-24 147.88,-24 147.88,-60"/>
<text xml:space="preserve" text-anchor="middle" x="114" y="-38.12" font-family="Times New Roman,serif" font-size="10.00">Raspberry Pi</text>
</g>
<!-- pi_psu&#45;&gt;pi -->
<g id="edge22" class="edge">
<title>pi_psu&#45;&gt;pi</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M306.64,-107.25C261.75,-92.27 200.19,-71.74 158.85,-57.96"/>
<polygon fill="black" stroke="black" points="160.05,-54.67 149.46,-54.82 157.84,-61.31 160.05,-54.67"/>
<text xml:space="preserve" text-anchor="middle" x="264.12" y="-79.95" font-family="Times New Roman,serif" font-size="9.00">5V power</text>
</g>
<!-- shunt&#45;&gt;pv_disconnect -->
<g id="edge7" class="edge">
<title>shunt&#45;&gt;pv_disconnect</title>
<path fill="none" stroke="black" d="M238,-365.8C238,-413.31 238,-545.19 238,-603.77"/>
<polygon fill="black" stroke="black" points="234.5,-603.59 238,-613.59 241.5,-603.59 234.5,-603.59"/>
<text xml:space="preserve" text-anchor="middle" x="299.88" y="-459.96" font-family="Times New Roman,serif" font-size="9.00">PV&#45; to source</text>
<text xml:space="preserve" text-anchor="middle" x="299.88" y="-449.46" font-family="Times New Roman,serif" font-size="9.00">(returns to PV disconnect terminal)</text>
</g>
<!-- pzem_sense&#45;&gt;shunt -->
<g id="edge15" class="edge">
<title>pzem_sense&#45;&gt;shunt</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M114.66,-425.73C120.2,-412.22 128.41,-397.19 140,-386.88 157.65,-371.19 168.02,-377.54 190,-368.88 190.23,-368.79 190.45,-368.7 190.68,-368.61"/>
<polygon fill="black" stroke="black" points="191.79,-371.94 199.74,-364.94 189.16,-365.46 191.79,-371.94"/>
<text xml:space="preserve" text-anchor="middle" x="182" y="-399.33" font-family="Times New Roman,serif" font-size="9.00">3x sense leads on shunt</text>
<text xml:space="preserve" text-anchor="middle" x="182" y="-388.83" font-family="Times New Roman,serif" font-size="9.00">(voltage measurement)</text>
</g>
<!-- iso_link -->
<g id="node19" class="node">
<title>iso_link</title>
<ellipse fill="none" stroke="black" cx="93" cy="-347.32" rx="60.63" ry="21.57"/>
<text xml:space="preserve" text-anchor="middle" x="93" y="-349.07" font-family="Times New Roman,serif" font-size="10.00">Internal Isolation</text>
<text xml:space="preserve" text-anchor="middle" x="93" y="-337.82" font-family="Times New Roman,serif" font-size="10.00">(galvanic barrier)</text>
</g>
<!-- pzem_sense&#45;&gt;iso_link -->
<g id="edge20" class="edge">
<title>pzem_sense&#45;&gt;iso_link</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M43.96,-425.43C38.41,-420.29 33.55,-414.46 30,-407.88 25.56,-399.67 25.44,-395.03 30,-386.88 33.54,-380.57 38.58,-375.17 44.29,-370.58"/>
<polygon fill="black" stroke="black" points="46.24,-373.48 52.44,-364.89 42.24,-367.74 46.24,-373.48"/>
<text xml:space="preserve" text-anchor="middle" x="54" y="-394.08" font-family="Times New Roman,serif" font-size="9.00">sense domain</text>
</g>
<!-- pzem_data -->
<g id="node18" class="node">
<title>pzem_data</title>
<polygon fill="none" stroke="black" points="152.38,-279.25 33.62,-279.25 33.62,-215 152.38,-215 152.38,-279.25"/>
<text xml:space="preserve" text-anchor="middle" x="93" y="-265.75" font-family="Times New Roman,serif" font-size="10.00">Data Side</text>
<text xml:space="preserve" text-anchor="middle" x="93" y="-254.5" font-family="Times New Roman,serif" font-size="10.00">(RS485 + power)</text>
<text xml:space="preserve" text-anchor="middle" x="93" y="-243.25" font-family="Times New Roman,serif" font-size="10.00">&#45; A/B to RS485 HAT</text>
<text xml:space="preserve" text-anchor="middle" x="93" y="-232" font-family="Times New Roman,serif" font-size="10.00">&#45; 5V/GND from Pi GPIO</text>
<text xml:space="preserve" text-anchor="middle" x="93" y="-220.75" font-family="Times New Roman,serif" font-size="10.00">(data side powered by Pi)</text>
</g>
<!-- rs485_hat -->
<g id="node20" class="node">
<title>rs485_hat</title>
<polygon fill="none" stroke="black" points="148.38,-148.25 23.63,-148.25 23.63,-106.5 148.38,-106.5 148.38,-148.25"/>
<text xml:space="preserve" text-anchor="middle" x="86" y="-134.75" font-family="Times New Roman,serif" font-size="10.00">RS485/CAN HAT</text>
<text xml:space="preserve" text-anchor="middle" x="86" y="-123.5" font-family="Times New Roman,serif" font-size="10.00">(set to RS485 mode)</text>
<text xml:space="preserve" text-anchor="middle" x="86" y="-112.25" font-family="Times New Roman,serif" font-size="10.00">(differential + termination)</text>
</g>
<!-- pzem_data&#45;&gt;rs485_hat -->
<g id="edge17" class="edge">
<title>pzem_data&#45;&gt;rs485_hat</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M91.12,-214.57C90.11,-197.52 88.86,-176.55 87.85,-159.56"/>
<polygon fill="black" stroke="black" points="91.38,-159.81 87.29,-150.04 84.39,-160.23 91.38,-159.81"/>
<text xml:space="preserve" text-anchor="middle" x="110.54" y="-188.45" font-family="Times New Roman,serif" font-size="9.00">RS485 A/B</text>
</g>
<!-- iso_link&#45;&gt;pzem_data -->
<g id="edge21" class="edge">
<title>iso_link&#45;&gt;pzem_data</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M93,-325.49C93,-315.34 93,-302.74 93,-290.67"/>
<polygon fill="black" stroke="black" points="96.5,-290.88 93,-280.88 89.5,-290.88 96.5,-290.88"/>
<text xml:space="preserve" text-anchor="middle" x="114.38" y="-299.2" font-family="Times New Roman,serif" font-size="9.00">data domain</text>
</g>
<!-- rs485_hat&#45;&gt;pi -->
<g id="edge18" class="edge">
<title>rs485_hat&#45;&gt;pi</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M86.98,-106.17C87.87,-97.32 89.56,-86.95 92.75,-78 93.66,-75.46 94.76,-72.9 95.98,-70.39"/>
<polygon fill="black" stroke="black" points="98.97,-72.23 100.76,-61.79 92.84,-68.83 98.97,-72.23"/>
<text xml:space="preserve" text-anchor="middle" x="135.88" y="-79.95" font-family="Times New Roman,serif" font-size="9.00">UART via GPIO header</text>
</g>
<!-- pi&#45;&gt;pzem_data -->
<g id="edge19" class="edge">
<title>pi&#45;&gt;pzem_data</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M148.3,-53.26C160.16,-58.63 172.16,-66.56 179,-78 181.39,-82.01 179.56,-83.87 179,-88.5 174.08,-129.38 176.7,-142.34 157,-178.5 151.66,-188.29 144.56,-197.72 137.02,-206.27"/>
<polygon fill="black" stroke="black" points="134.64,-203.68 130.41,-213.39 139.78,-208.44 134.64,-203.68"/>
<text xml:space="preserve" text-anchor="middle" x="229.53" y="-124.08" font-family="Times New Roman,serif" font-size="9.00">5V + GND (data&#45;side power)</text>
</g>
</g>
</svg>
